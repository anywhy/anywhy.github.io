<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>咩咩杨 ( =•ω•= )</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://anywhy.xyz/"/>
  <updated>2019-10-12T08:18:11.741Z</updated>
  <id>http://anywhy.xyz/</id>
  
  <author>
    <name>Anywhy  ( =•ω•= )</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Kubernetes CSI Volume 插件设计</title>
    <link href="http://anywhy.xyz/2019/10/12/k8s-csi/"/>
    <id>http://anywhy.xyz/2019/10/12/k8s-csi/</id>
    <published>2019-10-12T11:21:08.000Z</published>
    <updated>2019-10-12T08:18:11.741Z</updated>
    
    <content type="html"><![CDATA[<h1 id="CSI-Volume-Plugins-in-Kubernetes-Design-Doc"><a href="#CSI-Volume-Plugins-in-Kubernetes-Design-Doc" class="headerlink" title="CSI Volume Plugins in Kubernetes Design Doc"></a>CSI Volume Plugins in Kubernetes Design Doc</h1><h2 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h2><table><thead><tr><th>术语</th><th>解析</th></tr></thead><tbody><tr><td>Container Storage Interface (CSI)</td><td>一种试图建立行业标准接口的规范，容器编排系统(COs)可以用来将任意存储系统暴露给它们的容器化工作负载。</td></tr><tr><td>in-tree</td><td>Kubernetes 核心代码库中的代码。</td></tr><tr><td>out-of-tree</td><td>Kubernetes 核心代码库之外的代码。</td></tr><tr><td>CSI Volume Plugin</td><td>核心代码库中一个新的volume插件，用作适配器，支持第三方Kubernetes CSI volume驱动程序。</td></tr><tr><td>CSI Volume Driver</td><td>第三方CSI插件驱动实现，可以用过CSI Volume Plugin在Kubernetes中使用。</td></tr></tbody></table><a id="more"></a><h2 id="背景-amp-动机"><a href="#背景-amp-动机" class="headerlink" title="背景&amp;动机"></a>背景&amp;动机</h2><p>Kubernetes volume 插件当前是“in-tree”方式实现，这样意味着它们与核心库本内二进制文件链接、编译、构建和交付。 向Kubernes(volume)添加新的存储系统需要将需改Kubernes核心代码库。这是不可取的，原因有很多，包括:</p><ol><li>Volume插件发布是一个紧密的过程而且依赖于Kubernetes releases版本。</li><li>Kubernetes开发人员/社区负责测试和维护所有卷插件，而不仅仅是测试和维护稳定的插件应用编程接口。</li><li>Volume插件中的错误会导致关键的Kubernetes组件崩溃，而不仅仅是插件。 </li><li>Volume插件获得Kubernetes组件(kubeletkube-controller-manager)的完全权限。</li><li>插件开发人员被迫提供插件源代码，不能选择只发布可执行包。</li></ol><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>为了支持CSI兼容卷插件，Kubernetes将引入一个新的树内CSI卷插件。这个新的Volume插件将成为Kubernetes用户(应用程序开发人员和集群管理员)与外部CSI卷驱动程序交互的机制。</p><p>对新的<code>in-tree</code>CSI卷插件的<code>设置</code>/<code>拆卸</code>调用将通过节点计算机上的unix domain socket(UDS)直接调用<code>NodePublishVolume</code>和<code>NodeUnpublishVolume</code>CSI RPCs。</p><p>提供/删除和附加/分离必须由某个外部组件来处理，该组件代表CSI卷驱动程序监视Kubernetes API，并调用适当的CSI RPCs接口。</p><p>为了简化集成，Kubernetes团队将提供一个容器来捕获所有Kubernetes特定的逻辑，并充当第三方容器化CSI卷驱动程序和Kubernetes之间的适配器(CSI驱动程序的每个部署都有自己的适配器实例)。</p><h2 id="设计详情"><a href="#设计详情" class="headerlink" title="设计详情"></a>设计详情</h2><h3 id="第三方-CSI-Volume-Drivers"><a href="#第三方-CSI-Volume-Drivers" class="headerlink" title="第三方 CSI Volume Drivers"></a>第三方 CSI Volume Drivers</h3><p>Kubernetes对CSI卷驱动程序的打包和部署尽可能不严格。使用通信信道(记录在下面)是在Kubernetes启用任意外部CSI兼容存储驱动程序的唯一要求。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;CSI-Volume-Plugins-in-Kubernetes-Design-Doc&quot;&gt;&lt;a href=&quot;#CSI-Volume-Plugins-in-Kubernetes-Design-Doc&quot; class=&quot;headerlink&quot; title=&quot;CSI Volume Plugins in Kubernetes Design Doc&quot;&gt;&lt;/a&gt;CSI Volume Plugins in Kubernetes Design Doc&lt;/h1&gt;&lt;h2 id=&quot;术语&quot;&gt;&lt;a href=&quot;#术语&quot; class=&quot;headerlink&quot; title=&quot;术语&quot;&gt;&lt;/a&gt;术语&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;术语&lt;/th&gt;
&lt;th&gt;解析&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;Container Storage Interface (CSI)&lt;/td&gt;
&lt;td&gt;一种试图建立行业标准接口的规范，容器编排系统(COs)可以用来将任意存储系统暴露给它们的容器化工作负载。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;in-tree&lt;/td&gt;
&lt;td&gt;Kubernetes 核心代码库中的代码。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;out-of-tree&lt;/td&gt;
&lt;td&gt;Kubernetes 核心代码库之外的代码。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CSI Volume Plugin&lt;/td&gt;
&lt;td&gt;核心代码库中一个新的volume插件，用作适配器，支持第三方Kubernetes CSI volume驱动程序。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CSI Volume Driver&lt;/td&gt;
&lt;td&gt;第三方CSI插件驱动实现，可以用过CSI Volume Plugin在Kubernetes中使用。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
    
      <category term="Kubernetes" scheme="http://anywhy.xyz/categories/Kubernetes/"/>
    
    
      <category term="CSI" scheme="http://anywhy.xyz/tags/CSI/"/>
    
      <category term="k8s" scheme="http://anywhy.xyz/tags/k8s/"/>
    
      <category term="storage" scheme="http://anywhy.xyz/tags/storage/"/>
    
  </entry>
  
</feed>
